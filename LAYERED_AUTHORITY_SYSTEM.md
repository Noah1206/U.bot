# AI Life Layer - 설계 문서

## 핵심 비전

> **"AI가 인터페이스가 아니라 생활 레이어가 됨"**

사용자가 요청하지 않아도 AI가 감지하고, 필요한 AI 팀을 자동 구성하고, 실행까지 완료.

```
Before: 필요 → 검색 → 고민 → 구매
After:  필요 → (생각만 함) → AI가 이미 처리함
```

---

## 기존 서비스 vs 우리 서비스

| 기존 | 우리 |
|------|------|
| 사람 → AI → 결과 → 사람 확인 → 실행 | 사람 → [AI ↔ AI ↔ AI] → 실행 |
| 탭 여러 개 열어서 비교 | AI끼리 진짜 대화, 수정, 반박 |
| 기능을 만들어야 함 | **AI 팀이 기능을 만들어냄** |
| ChatGPT 쓰는 느낌 | "내 뒤에서 AI 팀이 일하는 느낌" |
| 서비스가 제공하는 AI | **유저가 등록한 자기 AI들** |
| 하나의 AI가 하나의 작업 | **여러 AI가 협력해 완전 자동화** |

---

## 🔑 User AI Registration (유저 AI 등록)

> **핵심: 유저가 자신의 AI 계정들을 등록하고, 권한을 부여한다.**

```
┌─────────────────────────────────────────────────────┐
│              내 AI 계정 관리                          │
│                                                     │
│  등록된 AI 계정:                                     │
│  ┌─────────────────────────────────────────────────┐
│  │ 🟢 ChatGPT Plus    │ API Key: sk-...xxx │ 활성  │
│  │ 🟢 Claude Pro      │ API Key: sk-...yyy │ 활성  │
│  │ 🟢 Gemini Advanced │ API Key: AI-...zzz │ 활성  │
│  │ 🟡 Perplexity Pro  │ API Key: ppl-...   │ 제한  │
│  │ ⚪ Midjourney      │ 미연결              │ 대기  │
│  └─────────────────────────────────────────────────┘
│                                                     │
│  [+ AI 계정 추가]                                    │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 왜 유저가 직접 등록하는가?

1. **비용 투명성**: 유저가 자기 API 사용량을 직접 관리
2. **신뢰성**: "내 AI"라는 소유감 → 결과에 대한 신뢰
3. **유연성**: 원하는 AI 조합을 자유롭게 구성
4. **확장성**: 새로운 AI 모델이 나오면 바로 추가 가능

### 등록 가능한 AI 서비스

| 서비스 | 용도 | 연동 방식 |
|--------|------|----------|
| OpenAI (ChatGPT) | 범용, 실행 | API Key |
| Anthropic (Claude) | 검증, 비판, 논리 | API Key |
| Google (Gemini) | 멀티모달, 구체화 | API Key |
| Perplexity | 실시간 검색, 조사 | API Key |
| Midjourney | 이미지 생성 | Discord Bot |
| ElevenLabs | 음성 합성 | API Key |
| 기타 | 확장 가능 | Plugin |

---

## 🛡️ Permission System (권한 부여 시스템)

> **유저가 AI에게 무엇을 할 수 있는지 명시적으로 권한을 부여**

```
┌─────────────────────────────────────────────────────┐
│              AI 권한 설정                            │
│                                                     │
│  📋 정보 접근 권한                                   │
│  ├── ✅ 캘린더 읽기                                  │
│  ├── ✅ 이메일 읽기 (제목만)                         │
│  ├── ❌ 이메일 내용 읽기                             │
│  ├── ✅ 위치 정보                                    │
│  └── ✅ 구매 내역                                    │
│                                                     │
│  💳 실행 권한                                        │
│  ├── ✅ 상품 검색                                    │
│  ├── ✅ 장바구니 담기                                │
│  ├── ⚠️ 자동 구매 (₩50,000 이하)                    │
│  ├── ❌ 자동 구매 (₩50,000 초과)                    │
│  └── ❌ 구독 결제                                    │
│                                                     │
│  📱 외부 서비스 연동                                 │
│  ├── ✅ 카카오톡 알림 발송                           │
│  ├── ✅ 쿠팡 주문                                    │
│  ├── ⚠️ 배달의민족 (점심시간만)                      │
│  └── ❌ 항공권 예약                                  │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 권한 레벨

| Level | 설명 | 예시 |
|-------|------|------|
| ✅ 허용 | 항상 자동 실행 | 상품 검색, 정보 조회 |
| ⚠️ 조건부 | 특정 조건에서만 | 금액 한도, 시간대 제한 |
| ❌ 차단 | 항상 사용자 확인 필요 | 대금 결제, 중요 계약 |

### 점진적 신뢰 구축

```
1주차: 검색, 정보 조회만 허용
      ↓ (AI가 잘 작동하는 것 확인)
1개월: ₩10,000 이하 자동 구매 허용
      ↓ (문제 없음)
3개월: ₩50,000 이하 자동 구매 허용
      ↓
6개월: 특정 카테고리 무제한
```

유저가 AI를 신뢰할수록 더 많은 권한 부여 → **완전 자동화로 진화**

---

## 핵심 구조: Dynamic AI Team Assembly

### 1단계: 감지 (Detection)

AI가 항상 listening. 명시적 요청이 아니어도 **의도/니즈 감지**.

```
유저 발화: "요즘 허리 아픈데..."

감지 결과:
├── 주제: 건강/신체
├── 감정: 불편함
├── 암시적 니즈: 해결책 필요
└── 행동 가능성: 제품 구매, 병원 예약, 운동 추천
```

### 2단계: 팀 구성 (Team Assembly)

감지된 니즈에 따라 **필요한 AI 팀 자동 구성**.

```
┌─────────────────────────────────────────────────────┐
│              ORCHESTRATOR (팀 구성 AI)               │
│                                                     │
│  Input: "허리 아픔" + 컨텍스트                        │
│                                                     │
│  분석:                                              │
│  - 건강 관련 → Health AI 필요                        │
│  - 제품 구매 가능성 → Research AI 필요               │
│  - 비용 발생 → Budget AI 필요                        │
│  - 위험 검증 → Risk AI 필요                          │
│                                                     │
│  구성된 팀:                                          │
│  [Health] → [Research] → [Budget] → [Risk]          │
└─────────────────────────────────────────────────────┘
```

### 3단계: 체인 실행 (Chain Execution)

AI들이 **서로 결과를 읽고, 수정하고, 반박**하며 진행.

```
Health AI
│ "허리 통증 → 장시간 앉은 자세 문제 가능성"
│ "추천: 인체공학 의자 또는 스탠딩 데스크"
▼
Research AI
│ ← Health AI 결과 수신
│ "인체공학 의자 조사 완료"
│ "Top 3: 시디즈 T80, 허먼밀러, 듀오백"
│ "가격대: 30만~150만원"
▼
Budget AI
│ ← Research AI 결과 수신
│ "현재 예산: 50만원"
│ "추천: 시디즈 T80 (35만원)"
│ "할인 정보: 쿠팡 10% 할인 중"
▼
Risk AI
│ ← Budget AI 결과 수신
│ "판매자 검증: ✓ 공식 스토어"
│ "리뷰 분석: 4.7/5 (2,340개)"
│ "사기 위험: 없음"
▼
CONSENSUS: 3/3 동의 → 실행
```

### 4단계: 자동 실행 (Autonomous Execution)

```
┌─────────────────────────────────────────────────────┐
│                  실행 완료                           │
│                                                     │
│  ✅ 시디즈 T80 의자 주문 완료                        │
│  📦 배송 예정: 내일 도착                             │
│  💰 결제: ₩315,000 (AI Wallet)                      │
│                                                     │
│  📱 알림: "허리 건강을 위해 의자 주문했어요"          │
└─────────────────────────────────────────────────────┘

유저는 "허리 아파"라고만 했음. 구매 요청 안 함.
```

---

## 실제 사용 시나리오

### 🛒 일반인

```
유저: "요즘 허리 아픈데..."

[감지] → 건강 문제
[팀 구성] → Health + Research + Budget + Risk
[실행]
  Health AI    → 원인 분석, 해결책 제안
  Research AI  → 제품/서비스 조사
  Budget AI    → 예산 검토, 최저가 탐색
  Risk AI      → 사기 검증, 리뷰 분석
[결과] → 의자 자동 구매

⏱️ 유저 개입: 0
```

### 🚀 창업자

```
유저: "랜딩페이지 전환율 낮음"

[감지] → 비즈니스 문제
[팀 구성] → Analytics + UX + Copy + Deploy
[실행]
  Analytics AI → 데이터 분석, 이탈 지점 파악
  UX AI        → 레이아웃 수정안 생성
  Copy AI      → 헤드라인/CTA 재작성
  Deploy AI    → A/B 테스트 생성 및 배포
[결과] → 새 버전 라이브

⏱️ 회의: 0
```

### 👨‍💻 개발자

```
이벤트: 버그 리포트 접수

[감지] → 기술 문제
[팀 구성] → Debug + Test + Deploy
[실행]
  Debug AI  → 코드 분석, 버그 수정
  Test AI   → 테스트 작성, 검증
  Deploy AI → PR 생성, 배포
[결과] → 핫픽스 완료

⏱️ 잠자는 동안 끝
```

---

## AI 역할 라이브러리

상황에 따라 **동적으로 선택**되는 AI 역할들:

### 공통 (Core)
| AI | 역할 |
|----|------|
| Orchestrator | 팀 구성, 작업 분배 |
| Budget | 비용 검토, 예산 관리 |
| Risk | 위험 분석, 검증 |

### 생활 (Life)
| AI | 역할 |
|----|------|
| Health | 건강 관련 분석 |
| Shopping | 제품 조사, 비교 |
| Schedule | 일정 관리 |
| Travel | 여행 계획 |

### 업무 (Work)
| AI | 역할 |
|----|------|
| Analytics | 데이터 분석 |
| Writer | 문서 작성 |
| Designer | 디자인 제안 |
| Developer | 코드 작성/수정 |

### 검증 (Verification)
| AI | 역할 |
|----|------|
| Critic | 논리 검증, 반박 |
| Fact-checker | 사실 확인 |
| Quality | 품질 검증 |

---

## Model-to-Model Protocol

AI 간 통신 표준 포맷:

```json
{
  "chain_id": "uuid-chain",
  "step": 2,
  "from": {
    "role": "RESEARCH_AI",
    "model": "perplexity"
  },
  "to": {
    "role": "BUDGET_AI",
    "model": "claude"
  },
  "type": "handoff",
  "payload": {
    "task": "price_review",
    "context": {
      "product": "시디즈 T80",
      "price": 350000,
      "source": "coupang.com",
      "alternatives": [...]
    },
    "confidence": 0.89,
    "requires_critique": true
  },
  "history": [
    {"step": 1, "from": "HEALTH_AI", "summary": "인체공학 의자 추천"}
  ]
}
```

### 통신 타입

| Type | 설명 |
|------|------|
| `handoff` | 다음 AI에게 작업 전달 |
| `critique` | 이전 결과에 대한 비판/수정 요청 |
| `vote` | Consensus 투표 |
| `execute` | 최종 실행 명령 |
| `rollback` | 이전 단계로 되돌리기 |

---

## Layered Authority System (실행 권한)

### Level 1: Auto Execute
- 설정된 범위 내
- AI Consensus 통과
- 즉시 실행

### Level 2: Delayed Execute
- 금액/중요도에 따라 지연
- 지연 중 취소 가능
- "6시간 후 구매 예정"

### Level 3: User Confirm
- 범위 초과 또는 Consensus 불일치
- 사용자 승인 필요
- "이 작업을 진행할까요?"

### Level 4: Blocked
- 위험 감지
- 실행 불가
- "이 작업은 위험해 보여요"

---

## AI Wallet (예산 격리)

```
┌─────────────────────────────────────┐
│            AI WALLET                 │
│                                     │
│  💰 Balance: ₩500,000               │
│                                     │
│  카테고리별 할당:                     │
│  ├── 🛒 생활용품: ₩200,000          │
│  ├── 🍔 식비: ₩150,000              │
│  ├── 📱 구독: ₩50,000               │
│  └── 🎯 기타: ₩100,000              │
│                                     │
│  이번 달 사용: ₩185,000             │
│  자동 실행 가능: ₩315,000           │
└─────────────────────────────────────┘
```

- 충전식 (신용카드 직접 연결 ❌)
- 최대 손실 금액 명확
- 카테고리별 한도
- 이상 거래 시 자동 동결

---

## Frontend 시각화 요구사항

### 메인 화면
1. **Dynamic AI Team** - 상황에 따라 활성화되는 AI들
2. **Chain Visualization** - AI 간 데이터 흐름
3. **Real-time Status** - 각 AI 상태 (감지/분석/실행)
4. **Consensus Indicator** - 동의 현황

### AI Activity Log
- 실시간 AI 대화 로그
- 어떤 AI가 무슨 판단을 했는지
- 체인 진행 상황

### Execution Panel
- 현재 진행 중인 작업
- 예상 완료 시간
- 취소/수정 옵션

---

## 바이럴 포인트

> **"내 AI가 내가 자는 동안 필요한 거 주문해놨음."**

이 한 줄이 서비스의 본질.

설명 필요 없음.

---

## 기술 스택

### AI Models (유저 등록 방식)

> ⚠️ **중요**: 시스템이 AI를 제공하는 게 아니라, **유저가 자신의 AI 계정을 등록**

```
유저 A의 AI 풀:
├── ChatGPT Plus (OpenAI)
├── Claude Pro (Anthropic)
└── Gemini (Google)

유저 B의 AI 풀:
├── ChatGPT Plus (OpenAI)
├── Perplexity Pro
└── Midjourney
```

**역할별 최적 AI 자동 매칭**:
- **해석/실행/범용**: GPT-4, Claude
- **검증/비판/논리**: Claude, GPT-4
- **구체화/멀티모달**: Gemini, GPT-4V
- **실시간 정보/조사**: Perplexity
- **이미지 생성**: Midjourney, DALL-E

### Backend
- Python FastAPI
- LangGraph - Multi-agent orchestration
- Redis - 상태 관리, 캐시

### Frontend
- Phaser.js - AI 시각화
- React - UI

### Database
- PostgreSQL - 사용자, 거래
- Vector DB - 컨텍스트 저장

---

## Moat (해자)

### 1. Model-to-Model Protocol

AI끼리 대화할 수 있는 공통 언어.

이 프로토콜이 표준이 되면, 모든 AI 서비스가 이 위에서 돌아감.

### 2. User-Owned AI Orchestration

```
기존 서비스:
  서비스가 AI 제공 → 유저가 사용료 지불 → 종속

우리 서비스:
  유저가 AI 보유 → 우리는 오케스트레이션만 → 유저 자산 활용
```

**왜 따라올 수 없는가?**

1. **비용 구조**: 유저의 AI 사용 → 우리 서버 비용 최소
2. **신뢰 장벽**: "내 AI"가 일한다는 심리적 안정감
3. **확장성**: 새 AI 모델 = 유저가 알아서 추가
4. **네트워크 효과**: AI 권한 설정 템플릿 공유 커뮤니티

### 3. Permission Learning

```
유저의 권한 설정 패턴 학습
→ 비슷한 상황에서 자동으로 권한 범위 추천
→ "다른 유저 80%가 이 경우 자동 실행을 허용했어요"
```

---

## Roadmap

### Phase 1: MVP
- [ ] 3 AI Consensus (Budget, Need, Risk)
- [ ] 명시적 요청 처리
- [ ] AI Wallet 기본

### Phase 2: Detection
- [ ] 암시적 니즈 감지
- [ ] Dynamic Team Assembly
- [ ] Auto Execution

### Phase 3: Life Layer
- [ ] 다양한 AI 역할 추가
- [ ] 외부 서비스 연동 (캘린더, 쇼핑몰 등)
- [ ] "삶이 자동으로 굴러감"
